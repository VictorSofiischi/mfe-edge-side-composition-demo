# Инициализирование проекта

## Установка

Установить все зависимости нужно через **pnpm**:

```bash
pnpm install
```

## Для того чтобы запустить dev сервер хоста

```bash
pnpm build
pnpm dev
```

## Обьяснение

Это приложение работает как демо работы MFE c архитектурой Edge-Side Composition. Он имеет два приложения донора которые жертвует Route-ы для прокси главного проекта, gateway. Также есть shared приложение которая способна дать Route-ы независимо от выставленных параметров в .env


```env
JURISDICTION=jurisdiction1
```

или

```env
JURISDICTION=jurisdiction2
```

Также были созданы полностью изолированные модули **@repo/ui** и **@repo/core** в которой хранится общие UI элементы и бизнесс логика. Они изолированны и тестируемы на 100% самостоятельно без зависимостей.
Как и UI так и Бизнесс логика вызывается в remote-ах в зависимости от нужный юрисдикции

В **@repo/core** есть две папки **jurisdiction1**. Бизнесс логика которая привязана к первой юрисдикции и **jurisdiction2** которая привязана ко второй. Также можно создать и shared для общей бизнес логики.

Как пример там вызванно API вызов GET с разными данными.

По итогу в зависимости от выбранной юрисдикции, на хосте рендерится нужные данные с нужными UI элементами, а host как таковой является просто оболочкой которая показывает то что дает Remote-ы

Все Route-ы который используются в gateway проекте просто стягиваются с нужного порта, и показываются обычным прокси, тем самым проксируя и js/css/assets файлы тем же образом

Gateway по итогу рендерит эти Route-ы у себя, делаю илюзию того что вся логика находиться в нем, хотя это не так
Remote приложения всегда должны иметь strictPort режим включен для коректной работы и подключения HOST-a к Remote-ам

Логика такова - юзер стягивает какой-то конкретный Route, в свою очередь в зависимости от юрисдикции, gateway ищет этот Route в нужном remote-e, если мы получаем от него 404 (нету такого рута) в этом случае он ищет в shared приложении, если и там его нету и показывать нечего, он показывает страницу ошибки 404

Если в этой цепочке находиться нужный Route, он берет HTML, и рендериться. Внутри HTML есть связавыние со скриптами м стилями через **script** например, он тянет assets, которые также попадают в прокси, и проксируются и они соединяя в единую работоспособную страницу. Все Remote-ы изолированны и могут спокойно работать и без Gateway если перейти по ним напрямую на правильный порт

Для тестирование архитетуры достаточно добавить **JURISDICTION** параметр в .env в Gateway и запустить
```bash
pnpm dev
```

После этого перейти на **localhost:3000/jurisdiction**. Он покажет страницу которая зависит от этой переменной, или же перейти на **localhost:3000/sharedRoute** который покажет route из общего remote-a


